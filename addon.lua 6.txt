-- ANTI-AFK MENU - Nh√¢n v·∫≠t ng·ªìi y√™n, kh√¥ng nh·∫£y
-- Ch·ªâ g·ª≠i input ·∫©n m·ªói 60 gi√¢y

local player = game.Players.LocalPlayer
local VirtualInput = game:GetService("VirtualInputManager")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- T·∫°o GUI ch√≠nh
local gui = Instance.new("ScreenGui")
gui.Name = "AntiAFKMenu"
gui.Parent = player:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

-- N√∫t m·ªü menu (v√≤ng tr√≤n nh·ªè)
local openButton = Instance.new("ImageButton")
openButton.Name = "OpenButton"
openButton.Size = UDim2.new(0, 40, 0, 40)
openButton.Position = UDim2.new(1, -50, 0.5, -20)
openButton.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
openButton.BackgroundTransparency = 0.3
openButton.BorderSizePixel = 0
openButton.ZIndex = 10
openButton.Parent = gui

local openCorner = Instance.new("UICorner")
openCorner.CornerRadius = UDim.new(1, 0)
openCorner.Parent = openButton

local openIcon = Instance.new("TextLabel")
openIcon.Size = UDim2.new(1, 0, 1, 0)
openIcon.BackgroundTransparency = 1
openIcon.Text = "‚öôÔ∏è"
openIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
openIcon.TextSize = 20
openIcon.Parent = openButton

-- Menu ch√≠nh
local mainMenu = Instance.new("Frame")
mainMenu.Name = "MainMenu"
mainMenu.Size = UDim2.new(0, 300, 0, 350)
mainMenu.Position = UDim2.new(1, -320, 0.5, -175)
mainMenu.BackgroundColor3 = Color3.fromRGB(30, 35, 45)
mainMenu.BackgroundTransparency = 0.1
mainMenu.BorderSizePixel = 0
mainMenu.Visible = false
mainMenu.ZIndex = 9
mainMenu.Parent = gui

local menuCorner = Instance.new("UICorner")
menuCorner.CornerRadius = UDim.new(0, 12)
menuCorner.Parent = mainMenu

local menuShadow = Instance.new("UIStroke")
menuShadow.Color = Color3.fromRGB(0, 0, 0)
menuShadow.Thickness = 2
menuShadow.Transparency = 0.7
menuShadow.Parent = mainMenu

-- Ti√™u ƒë·ªÅ menu
local titleFrame = Instance.new("Frame")
titleFrame.Size = UDim2.new(1, 0, 0, 50)
titleFrame.BackgroundColor3 = Color3.fromRGB(40, 45, 60)
titleFrame.BorderSizePixel = 0
titleFrame.Parent = mainMenu

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12, 0, 0)
titleCorner.Parent = titleFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -20, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "ü¶ã ANTI-AFK MENU ü´ô"
titleLabel.TextColor3 = Color3.fromRGB(220, 230, 255)
titleLabel.TextSize = 22
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.Parent = titleFrame

-- N√∫t ƒë√≥ng menu
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 10)
closeButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
closeButton.Text = "‚úï"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextSize = 18
closeButton.Font = Enum.Font.SourceSansBold
closeButton.Parent = titleFrame

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(1, 0)
closeCorner.Parent = closeButton

-- N·ªôi dung menu
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, 0, 1, -50)
contentFrame.Position = UDim2.new(0, 0, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainMenu

-- Ph·∫ßn tr·∫°ng th√°i
local statusFrame = Instance.new("Frame")
statusFrame.Size = UDim2.new(0.9, 0, 0, 80)
statusFrame.Position = UDim2.new(0.05, 0, 0, 10)
statusFrame.BackgroundColor3 = Color3.fromRGB(40, 45, 60)
statusFrame.Parent = contentFrame

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusFrame

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -20, 0.5, -5)
statusLabel.Position = UDim2.new(0, 10, 0, 5)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "TR·∫†NG TH√ÅI: ƒêANG HO·∫†T ƒê·ªòNG"
statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
statusLabel.TextSize = 18
statusLabel.Font = Enum.Font.SourceSansSemibold
statusLabel.Parent = statusFrame

local timerLabel = Instance.new("TextLabel")
timerLabel.Size = UDim2.new(1, -20, 0.5, -5)
timerLabel.Position = UDim2.new(0, 10, 0.5, 0)
timerLabel.BackgroundTransparency = 1
timerLabel.Text = "Next input: 60 gi√¢y"
timerLabel.TextColor3 = Color3.fromRGB(255, 255, 180)
timerLabel.TextSize = 16
timerLabel.Parent = statusFrame

-- Ph·∫ßn th·ªùi gian
local timeFrame = Instance.new("Frame")
timeFrame.Size = UDim2.new(0.9, 0, 0, 60)
timeFrame.Position = UDim2.new(0.05, 0, 0, 100)
timeFrame.BackgroundColor3 = Color3.fromRGB(40, 45, 60)
timeFrame.Parent = contentFrame

local timeCorner = Instance.new("UICorner")
timeCorner.CornerRadius = UDim.new(0, 8)
timeCorner.Parent = timeFrame

local sessionLabel = Instance.new("TextLabel")
sessionLabel.Size = UDim2.new(1, -20, 0.5, -5)
sessionLabel.Position = UDim2.new(0, 10, 0, 5)
sessionLabel.BackgroundTransparency = 1
sessionLabel.Text = "ƒê√£ treo: 00:00:00"
sessionLabel.TextColor3 = Color3.fromRGB(180, 220, 255)
sessionLabel.TextSize = 16
sessionLabel.Parent = timeFrame

local minutesLabel = Instance.new("TextLabel")
minutesLabel.Size = UDim2.new(1, -20, 0.5, -5)
minutesLabel.Position = UDim2.new(0, 10, 0.5, 0)
minutesLabel.BackgroundTransparency = 1
minutesLabel.Text = "T·ªïng ph√∫t: 0"
minutesLabel.TextColor3 = Color3.fromRGB(220, 220, 180)
minutesLabel.TextSize = 16
minutesLabel.Parent = timeFrame

-- N√∫t ƒëi·ªÅu khi·ªÉn
local controlFrame = Instance.new("Frame")
controlFrame.Size = UDim2.new(0.9, 0, 0, 120)
controlFrame.Position = UDim2.new(0.05, 0, 0, 170)
controlFrame.BackgroundTransparency = 1
controlFrame.Parent = contentFrame

-- N√∫t b·∫≠t/t·∫Øt ch√≠nh
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(1, 0, 0, 50)
toggleButton.BackgroundColor3 = Color3.fromRGB(0, 180, 80)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "üü¢ B·∫¨T ANTI-AFK"
toggleButton.TextSize = 20
toggleButton.Font = Enum.Font.SourceSansSemibold
toggleButton.Parent = controlFrame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 8)
toggleCorner.Parent = toggleButton

-- N√∫t g·ª≠i input ngay
local sendNowButton = Instance.new("TextButton")
sendNowButton.Size = UDim2.new(1, 0, 0, 40)
sendNowButton.Position = UDim2.new(0, 0, 0, 60)
sendNowButton.BackgroundColor3 = Color3.fromRGB(60, 100, 200)
sendNowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
sendNowButton.Text = "üîÑ G·ª≠i Input Ngay"
sendNowButton.TextSize = 18
sendNowButton.Font = Enum.Font.SourceSans
sendNowButton.Parent = controlFrame

local sendCorner = Instance.new("UICorner")
sendCorner.CornerRadius = UDim.new(0, 8)
sendCorner.Parent = sendNowButton

-- Bi·∫øn h·ªá th·ªëng
local isEnabled = true
local lastInputTime = tick()
local sessionStartTime = tick()
local totalMinutes = 0

-- H√†m g·ª≠i input ·∫©n (KH√îNG l√†m nh√¢n v·∫≠t di chuy·ªÉn)
local function sendStealthInput()
    if not isEnabled then return end
    
    -- G·ª≠i ph√≠m F24 (ph√≠m kh√¥ng d√πng)
    VirtualInput:SendKeyEvent(true, Enum.KeyCode.F24, false, game)
    task.wait(0.01)
    VirtualInput:SendKeyEvent(false, Enum.KeyCode.F24, false, game)
    
    -- G·ª≠i mouse click ·∫£o
    VirtualInput:SendMouseButtonEvent(0, 0, 0, true, game, 0)
    task.wait(0.01)
    VirtualInput:SendMouseButtonEvent(0, 0, 0, false, game, 0)
    
    lastInputTime = tick()
    
    -- C·∫≠p nh·∫≠t UI
    timerLabel.Text = "Next input: 60 gi√¢y"
    timerLabel.TextColor3 = Color3.fromRGB(255, 255, 180)
    
    print("[Anti-AFK] ƒê√£ g·ª≠i input ·∫©n - " .. os.date("%H:%M:%S"))
end

-- H√†m ƒë·ªãnh d·∫°ng th·ªùi gian
local function formatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local secs = math.floor(seconds % 60)
    return string.format("%02d:%02d:%02d", hours, minutes, secs)
end

-- C·∫≠p nh·∫≠t UI li√™n t·ª•c
RunService.Heartbeat:Connect(function(dt)
    local currentTime = tick()
    
    -- T√≠nh th·ªùi gian
    local timeSinceLast = currentTime - lastInputTime
    local timeUntilNext = math.max(0, 60 - timeSinceLast)
    local sessionTime = currentTime - sessionStartTime
    
    -- C·∫≠p nh·∫≠t ph√∫t ƒë√£ treo (m·ªói 6 ph√∫t = 1 ph√∫t treo)
    totalMinutes = math.floor(sessionTime / 360)
    
    -- C·∫≠p nh·∫≠t c√°c label
    timerLabel.Text = string.format("Next input: %02d gi√¢y", math.floor(timeUntilNext))
    sessionLabel.Text = "ƒê√£ treo: " .. formatTime(sessionTime)
    minutesLabel.Text = "T·ªïng ph√∫t: " .. totalMinutes
    
    -- ƒê·ªïi m√†u khi s·∫Øp g·ª≠i input
    if timeUntilNext <= 10 then
        timerLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
    else
        timerLabel.TextColor3 = Color3.fromRGB(255, 255, 180)
    end
    
    -- T·ª± ƒë·ªông g·ª≠i input m·ªói 60 gi√¢y
    if isEnabled and timeSinceLast >= 60 then
        sendStealthInput()
    end
end)

-- ===== S·ª∞ KI·ªÜN UI =====

-- M·ªü/ƒë√≥ng menu
openButton.MouseButton1Click:Connect(function()
    mainMenu.Visible = not mainMenu.Visible
    openButton.Visible = not mainMenu.Visible
end)

closeButton.MouseButton1Click:Connect(function()
    mainMenu.Visible = false
    openButton.Visible = true
end)

-- B·∫≠t/t·∫Øt anti-AFK
toggleButton.MouseButton1Click:Connect(function()
    isEnabled = not isEnabled
    
    if isEnabled then
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 180, 80)
        toggleButton.Text = "üü¢ B·∫¨T ANTI-AFK"
        statusLabel.Text = "TR·∫†NG TH√ÅI: ƒêANG HO·∫†T ƒê·ªòNG"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        sendStealthInput() -- G·ª≠i ngay khi b·∫≠t
    else
        toggleButton.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
        toggleButton.Text = "üî¥ T·∫ÆT ANTI-AFK"
        statusLabel.Text = "TR·∫†NG TH√ÅI: ƒê√É T·∫ÆT"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
end)

-- G·ª≠i input ngay
sendNowButton.MouseButton1Click:Connect(function()
    sendStealthInput()
end)

-- K√©o th·∫£ menu
local dragging = false
local dragStart, menuStart

titleFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        menuStart = mainMenu.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainMenu.Position = UDim2.new(
            menuStart.X.Scale, 
            menuStart.X.Offset + delta.X,
            menuStart.Y.Scale, 
            menuStart.Y.Offset + delta.Y
        )
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- G·ª≠i input ƒë·∫ßu ti√™n
sendStealthInput()

-- Th√¥ng b√°o
print("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó")
print("‚ïë     ANTI-AFK MENU LOADED     ‚ïë")
print("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£")
print("‚ïë ‚Ä¢ Click n√∫t ‚öôÔ∏è ƒë·ªÉ m·ªü menu    ‚ïë")
print("‚ïë ‚Ä¢ Nh√¢n v·∫≠t NG·ªíI Y√äN ho√†n to√†n‚ïë")
print("‚ïë ‚Ä¢ G·ª≠i input ·∫©n m·ªói 60 gi√¢y   ‚ïë")
print("‚ïë ‚Ä¢ Kh√¥ng di chuy·ªÉn/kh√¥ng nh·∫£y ‚ïë")
print("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù")
